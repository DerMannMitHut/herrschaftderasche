items:
  ashen_crown:
    state: broken
    states:
      broken: {}
      repaired: {}
      destroyed: {}
      worn: {}
  flame_blade: {}

rooms:
  ash_village:
    items: []
    exits:
      - grey_forest
      - black_tower
  grey_forest:
    items:
      - flame_blade
    exits:
      - ash_village
      - glow_chasm
  black_tower:
    items:
      - ashen_crown
    exits:
      - ash_village
      - glow_chasm
  glow_chasm:
    items: []
    exits:
      - grey_forest
      - black_tower

uses:
  repair_crown:
    item: flame_blade
    target: ashen_crown
    room: glow_chasm
    set_item_state:
      ashen_crown: repaired

start: ash_village

endings:
  crown_returned: "inventory has ashen_crown AND at ash_village"
  crown_repaired: "ashen_crown is repaired"
  crown_destroyed: "ashen_crown is destroyed"
  crown_worn: "ashen_crown is worn"
